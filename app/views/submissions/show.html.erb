<div class="max-w-2xl mx-auto">
  <div class="page-header">
    <h1 class="page-title">Submission: <%= @badge.title %></h1>
    <%= link_to "Back to Badge", badge_path(@badge), class: "btn-outline" %>
  </div>

  <div class="card space-y-6">
    <div class="flex items-center justify-between">
      <div>
        <% case @submission.status %>
        <% when "pending_review" %>
          <span class="status-pending">Pending Review</span>
        <% when "approved" %>
          <span class="status-earned">Approved</span>
        <% when "denied" %>
          <span class="status-denied">Denied</span>
        <% end %>
      </div>
      <p class="text-sm text-gray-500">
        Submitted <%= time_ago_in_words(@submission.submitted_at) %> ago
      </p>
    </div>

    <% if @submission.kid_notes.present? %>
      <div>
        <h3 class="font-semibold text-gray-800 mb-2">Your Notes</h3>
        <p class="text-gray-700"><%= @submission.kid_notes %></p>
      </div>
    <% end %>

    <% if @submission.attachments.attached? %>
      <div>
        <h3 class="font-semibold text-gray-800 mb-2">Attachments</h3>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
          <% @submission.attachments.each do |attachment| %>
            <% if attachment.image? %>
              <%= image_tag attachment, class: "rounded-xl object-cover w-full h-32" %>
            <% else %>
              <div class="p-4 bg-gray-100 rounded-xl">
                <p class="text-sm font-medium truncate"><%= attachment.filename %></p>
                <%= link_to "Download", rails_blob_path(attachment, disposition: "attachment"), class: "text-sm text-purple-600 hover:underline" %>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @submission.parent_feedback.present? %>
      <div class="p-4 rounded-xl <%= @submission.approved? ? 'bg-green-50' : 'bg-red-50' %>">
        <h3 class="font-semibold <%= @submission.approved? ? 'text-green-800' : 'text-red-800' %> mb-2">
          Parent Feedback
        </h3>
        <p class="<%= @submission.approved? ? 'text-green-700' : 'text-red-700' %>">
          <%= @submission.parent_feedback %>
        </p>
      </div>
    <% end %>
  </div>
</div>
